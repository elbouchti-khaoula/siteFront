<div class="flex flex-col flex-auto h-full bg-card dark:bg-default">

    <!-- Header -->
    <div class="flex flex-0 items-center h-18 px-6 border-b bg-gray-50 dark:bg-transparent">
        <button mat-icon-button (click)="closeDrawer()">
            <mat-icon [svgIcon]="'heroicons_outline:arrow-narrow-left'"></mat-icon>
        </button>
        <div class="ml-2 text-2xl font-semibold">Contacter le promoteur</div>
    </div>

    <!-- Main Form -->
    <div class="px-10 py-6 overflow-y-auto">
        <!-- Alert -->
        <fuse-alert *ngIf="alert" [type]="alert.type" [showIcon]="false">
            {{alert.message}}
        </fuse-alert>

        <!-- Promoteur card -->
        <fuse-card
            *ngIf="visible"
            [@fadeInLeft]="{value:'', params: {duration: 700}}"
            class="flex items-center justify-between max-w-120 w-full p-6 bg-second-50 mt-3">
            <div class="flex flex-col">
                <div class="text-2xl font-semibold leading-tight">{{projet.contact}}</div>
                <div class="text-md text-secondary">{{projet.telephone}}</div>
                <div class="text-md text-secondary">{{projet.email}}</div>
            </div>
            <ng-container *ngIf="projet.promoter.logoPath">
                <figure class="flex items-center justify-center w-28 h-32 sm:w-32 sm:h-36 bg-card">
                    <img [src]="projet.promoter.logoPath" class="object-cover w-full h-fit" />
                </figure>
            </ng-container>
            <ng-container *ngIf="!projet.promoter.logoPath">
                <span class="flex items-center justify-center w-28 h-32 sm:w-32 sm:h-36 rounded-2xl text-lg uppercase bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                    No Logo
                </span>
            </ng-container>
        </fuse-card>

        <form *ngIf="!visible" class="space-y-1"
            [formGroup]="projetContactForm"
            #projetContactNgForm="ngForm">
            
            <!-- Nom -->
            <mat-form-field class="w-full"
                [ngClass]="{'fuse-mat-dense': isScreenSmall}">
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:user'" matPrefix>
                </mat-icon>
                <input matInput [formControlName]="'nom'">
                <mat-label class="text-sm font-semibold">Nom</mat-label>
                <mat-error *ngIf="projetContactForm.get('nom').hasError('required')">
                    Nom obligatoire
                </mat-error>
            </mat-form-field>

            <!-- Prénom -->
            <mat-form-field class="w-full"
                [ngClass]="{'fuse-mat-dense': isScreenSmall}">
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:user'" matPrefix>
                </mat-icon>
                <input matInput [formControlName]="'prenom'">
                <mat-label class="text-sm font-semibold">Prénom</mat-label>
                <mat-error *ngIf="projetContactForm.get('prenom').hasError('required')">
                    Prénom obligatoire
                </mat-error>
            </mat-form-field>

            <!-- Téléphone -->
            <mat-form-field class="w-full"
                [ngClass]="{'fuse-mat-dense': isScreenSmall}">
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:phone'" matPrefix></mat-icon>
                <input matInput [formControlName]="'telephone'">
                <mat-label class="text-sm font-semibold">Téléphone</mat-label>
                <mat-error *ngIf="projetContactForm.get('telephone').hasError('required')">
                    Téléphone obligatoire
                </mat-error>
            </mat-form-field>

            <!-- Email -->
            <mat-form-field class="w-full"
                [ngClass]="{'fuse-mat-dense': isScreenSmall}">
                <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:mail'" matPrefix></mat-icon>
                <input type="email" matInput [formControlName]="'email'">
                <mat-label class="text-sm font-semibold">E-mail</mat-label>
                <mat-error *ngIf="projetContactForm.get('email').hasError('email')">
                    Enter a valid email address
                </mat-error>
                <mat-error *ngIf="projetContactForm.get('email').hasError('required')">
                    Email obligatoire
                </mat-error>
            </mat-form-field>

            <!-- Message -->
            <mat-form-field class="fuse-mat-textarea w-full">
                <textarea matInput
                    [formControlName]="'message'"
                    [rows]="3"
                    matTextareaAutosize>
                </textarea>
                <mat-label class="text-sm font-semibold">Message</mat-label>
            </mat-form-field>

            <!-- Actions -->
            <div class="flex items-center justify-end">
                <button mat-button
                    [color]="'accent'"
                    [disabled]="projetContactForm.pristine || projetContactForm.untouched"
                    (click)="clearForm()">
                    Vider
                </button>
                <button class="ml-2" 
                    mat-flat-button
                    [color]="'primary'"
                    [disabled]="projetContactForm.pristine || projetContactForm.invalid"
                    (click)="sendForm()">
                    Envoyer
                </button>
            </div>
        </form>
    </div>

</div>