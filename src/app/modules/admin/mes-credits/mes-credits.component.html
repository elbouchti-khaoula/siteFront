<div class="flex flex-col flex-auto min-w-0 overflow-hidden" [@fadeInRight]="{value:'', params: {duration: 700}}">

    <!-- Header -->
    <header class="flex flex-col items-center justify-center px-5 sm:px-16 w-full min-h-[45vh] md:min-h-[35vh] mes-credits-bg-header">
        <div class="w-full max-w-400">
            <bienvenue></bienvenue>
        </div>
    </header>

    <div class="px-5 sm:px-16 py-10 sm:pt-18 sm:pb-20">

        <div class="w-full max-w-400 mx-auto">

            <div class="flex flex-col">
                <span class="text-2xl md:text-4xl uppercase font-extrabold leading-tight tracking-tight text-primary">
                    Mes crédits
                </span>
                <div class="max-w-xl mt-2 md:text-xl text-secondary">
                    Vous avez ({{credits.length}}) crédits en cours
                </div>
            </div>
            
            <ng-container *ngIf="credits && credits.length > 0; else noCredits">

                <div class="mx-auto grid grid-cols-1 max-w-max gap-y-10 mt-10 md:mt-16">

                    <ng-container *ngFor="let credit of credits; let i = index; trackBy: trackByFn">

                        <fuse-card class="flex flex-col md:flex-row">
                            <!-- left -->
                            <div class="flex flex-col flex-auto items-center px-5 md:px-10 pt-8 pb-6">
                                <!-- titre -->
                                <div class="w-full flex items-center">
                                    <div class="flex items-center justify-center h-16 w-16 rounded-full font-medium text-center leading-none bg-primary-500">
                                        <mat-icon class="icon-size-16 text-on-primary ml-0.5" svgIcon="finance">
                                        </mat-icon>
                                    </div>
                                    <div class="ml-6 text-2xl font-bold leading-tight uppercase">Crédit N° 3456</div>
                                </div>

                                <!-- données -->
                                <div class="flex flex-col max-md:space-y-5 md:flex-row items-center justify-center md:space-x-10 mt-8">
                                    <div class="flex flex-col items-center">
                                        <span class="font-medium">Montant du crédit</span>
                                        <span class="text-3xl font-semibold">{{credit.montant}}</span>
                                    </div>
                                    
                                    <div class="flex flex-col items-center">
                                        <span class="font-medium">Capital restand dû</span>
                                        <span class="text-3xl font-semibold">{{credit.capital}}</span>
                                    </div>
        
                                    <div *ngIf="credit.impayes !== null" class="flex flex-col items-center text-warn">
                                        <span class="font-medium">Total des impayés</span>
                                        <span class="text-3xl font-semibold">{{credit.impayes}}</span>
                                    </div>
                                </div>

                                <!-- progress durée -->
                                <div class="w-full mt-5">
                                    <span class="font-medium">Durée restante : {{credit.dureeRestante}} mois</span>
                                    <mat-progress-bar
                                        class="mt-3 rounded-full"
                                        [mode]="'determinate'"
                                        [value]="((credit.duree - credit.dureeRestante) * 100) / credit.duree"></mat-progress-bar>
                                </div>
    
                                <!-- Actions -->
                                <div class="flex flex-col max-md:space-y-2 max-md:max-w-max md:flex-row md:flex-wrap mt-5">
                                    <button
                                        class="px-5 md:mt-2"
                                        mat-flat-button
                                        [color]="'primary'">
                                        <mat-icon
                                            class="icon-size-5"
                                            [svgIcon]="'heroicons_solid:save'"></mat-icon>
                                        <span class="ml-2">Arrêté de situation</span>
                                    </button>
                                    <button
                                        class="px-5 md:ml-2 md:mt-2"
                                        mat-flat-button
                                        [color]="'primary'">
                                        <mat-icon
                                            class="icon-size-5"
                                            [svgIcon]="'heroicons_solid:save'"></mat-icon>
                                        <span class="ml-2">Tableau d'amortissement</span>
                                    </button>
                                    <button
                                        class="px-5 md:ml-2 md:mt-2"
                                        mat-flat-button
                                        [color]="'primary'">
                                        <mat-icon
                                            class="icon-size-5"
                                            [svgIcon]="'heroicons_solid:save'"></mat-icon>
                                        <span class="ml-2">Attestation d'intérêts</span>
                                    </button>
                                </div>

                                <div *ngIf="credit.impayes !== null"
                                    class="md:max-w-184 flex flex-row py-2 px-3 rounded-md shadow bg-warn-100 mt-5">
                                    <mat-icon class="icon-size-5 text-warn-600" [svgIcon]="'heroicons_outline:exclamation'">
                                    </mat-icon>
                                    <span class="ml-2 text-md font-semibold">Merci d'alimenter votre compte bancaire ou d'effectuer un versement en faveur de WAFAIMMOBILIER sur le compte N° 007 780 00 02 38 200 0 170010 80 ou par le code SWIFT: BCMAMAMC.
                                    </span>
                                </div>
                            </div>
    
                            <!-- right -->
                            <div class="relative w-full md:w-100 bg-gray-200 px-5 md:px-10 pt-8 pb-6">

                                <img class="absolute inset-0 object-cover h-full opacity-20" src="assets/images/admin/mes-credits/sav.jpg">

                                <!-- titre -->
                                <div class="relative z-20 flex items-center">
                                    <div class="flex items-center justify-center h-16 w-16 rounded-full font-medium text-center leading-none bg-second-500">
                                        <mat-icon class="font-bold icon-size-16 text-black -mt-2" svgIcon="home-repair">
                                        </mat-icon>
                                    </div>
                                    <div class="ml-6 text-2xl font-bold leading-tight uppercase">Opérations SAV</div>
                                </div>

                                <div class="relative z-20 mx-auto max-w-100 grid grid-cols-2 gap-x-5 gap-y-3 mt-7">
                                    <div class="group px-2 py-3 flex flex-col items-center bg-black/[.7] rounded-2xl cursor-pointer transition-transform duration-500 ease-in-out hover:scale-[1.07] hover:bg-second-500">
                                        <mat-icon class="icon-size-10 mb-3 text-white group-hover:text-black" [svgIcon]="'heroicons_solid:puzzle'">
                                        </mat-icon>
                                        <span class="font-semibold text-white group-hover:text-black">Opérat SAV 1</span>
                                    </div>
                                    <div class="group px-2 py-3 flex flex-col items-center bg-black/[.7] rounded-2xl cursor-pointer transition-transform duration-500 ease-in-out hover:scale-[1.07] hover:bg-second-500">
                                        <mat-icon class="icon-size-10 mb-3 text-white group-hover:text-black" [svgIcon]="'heroicons_solid:clipboard-check'">
                                        </mat-icon>
                                        <span class="font-semibold text-white group-hover:text-black">Opérat SAV 2</span>
                                    </div>
                                    <div class="group px-2 py-3 flex flex-col items-center bg-black/[.7] rounded-2xl cursor-pointer transition-transform duration-500 ease-in-out hover:scale-[1.07] hover:bg-second-500">
                                        <mat-icon class="icon-size-10 mb-3 text-white group-hover:text-black" [svgIcon]="'heroicons_solid:collection'">
                                        </mat-icon>
                                        <span class="font-semibold text-white group-hover:text-black">Opérat SAV 3</span>
                                    </div>
                                    <div class="group px-2 py-3 flex flex-col items-center justify-center bg-black/[.7] rounded-2xl cursor-pointer transition-transform duration-500 ease-in-out hover:scale-[1.07] hover:bg-second-500">
                                        <mat-icon class="icon-size-10 text-white group-hover:text-black" [svgIcon]="'heroicons_outline:dots-horizontal'">
                                        </mat-icon>
                                        <!-- <span class="font-bold text-white group-hover:text-black">Opér SAV 4</span> -->
                                    </div>
                                </div>
                            </div>
                        </fuse-card>

                    </ng-container>

                </div>

            </ng-container>

            <!-- No demande template -->
            <ng-template #noCredits>
                <div class="flex flex-col flex-auto items-center justify-center bg-second-100 dark:bg-transparent min-h-60 border border border-gray-200 shadow-sm rounded-md mt-10">
                    <mat-icon class="icon-size-24" [svgIcon]="'mat_outline:search_off'"></mat-icon>
                    <div class="mt-4 text-2xl font-semibold tracking-tight text-secondary">
                        Il n'y a pas de crédit en cours!
                    </div>
                </div>
            </ng-template>
        </div>

    </div>

</div>